<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jxd.studentManage.mapper.IStudentListMapper">
    <!--默认显示查询全部员工数据-->
    <select id="getAllStudent" resultType="java.util.HashMap">
        SELECT s.studentid,s.studentname,de.departmentname,du.dutyname
        FROM student s,department de,duty du
        where s.departmentid=de.departmentid
        and s.dutyid=du.dutyid
    </select>

    <select id="getAllStudentByName" resultType="java.util.HashMap">
            select s.studentid,s.studentname,de.departmentname,du.dutyname
            from student s
            LEFT JOIN department de ON s.departmentid = de.departmentid
            LEFT JOIN duty du ON s.dutyid = du.dutyid
            where s.studentname like concat("%",#{studentname},"%")
    </select>

    <select id="getAllStudentByDept" resultType="java.util.HashMap">
            select s.studentid,s.studentname,de.departmentname,du.dutyname
            from student s
            LEFT JOIN department de ON s.departmentid = de.departmentid
            LEFT JOIN duty du ON s.dutyid = du.dutyid
            where de.departmentname like concat("%",#{departmentname},"%")
    </select>

        <!--查询按钮-->
    <select id="getAllStudentByNameAndDept" resultType="java.util.HashMap">
        select s.studentid,s.studentname,de.departmentname,du.dutyname
        from student s
        LEFT JOIN department de ON s.departmentid = de.departmentid
        LEFT JOIN duty du ON de.departmentid = du.dutyid
        where s.studentname like concat("%",#{studentname},"%")
        and de.departmentname like concat("%",#{departmentname},"%")
    </select>

    <!--假删除-->
    <update id="delStudent" parameterType="Student">
        update student set isdelete=1 where studentid in(
        <foreach collection="array" item="studentId" separator=",">
            #{studentId}
        </foreach>
        )
    </update>

    <!--修改-->
    <update id="editStudent" parameterType="Student">
        update student set
        nation=#{nation},birthday=#{birthday},address=#{address},isMarried=#{isMarried},tel=#{tel},
        school=#{school},major=#{major},remark=#{remark},photo=#{photo},idCard=#{idCard},
        where studentid = #{studentid}
    </update>

    <!--添加-->
    <insert id="addStudent" parameterType="Student">
        insert into student
        (studentname,nation,birthday,address,isMarried,tel,school,major,remark,photo,idCard)
        values
        (#{studentname},#{nation},#{birthday},#{address},#{isMarried},#{tel},#{school},#{major},
        #{remark},#{photo},#{idCard})
    </insert>
</mapper>